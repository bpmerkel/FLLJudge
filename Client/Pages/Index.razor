@page "/"
@inject Task<Model> _getModel

<PageTitle>FLL Judge Comments</PageTitle>

<MudAppBar Color="Color.Primary" Fixed="false" Dense="true">
    <MudTabs Elevation="4" Rounded="true" Centered="true" Color="@Color.Primary">
        @foreach (var area in model.Areas)
        {
            <MudTabPanel Text="@area.Name">
                <MudChipSet MultiSelection="true" Filter="true">
                    @foreach (var chip in area.Chips)
                    {
                        <MudChip Text="@chip" Variant="Variant.Text" Color="Color.Primary">@chip</MudChip>
                    }
                </MudChipSet>
                <MudList>
                    <MudListSubheader>
                        <MudTextField @bind-Value="@searchTerm" AdornmentIcon="@Icons.Material.Filled.Search"
                                      Adornment="Adornment.End" Immediate="true" Variant="Variant.Outlined" />
                    </MudListSubheader>

                    @foreach (var comment in area.Comments)
                    {
                        <MudListItem>
                            <MudRating SelectedValue="2" Size="Size.Large" MaxValue="3" />
                            <MudHighlighter Class="mud-primary-text"
                                            Style="background-color:transparent;font-weight:bold"
                                            Text="@comment.Text"
                                            UntilNextBoundary="true"
                                            CaseSensitive="false"
                                            Markup="true"
                                            HighlightedText="@searchTerm" />
                        </MudListItem>
                    }
                </MudList>
            </MudTabPanel>
        }
    </MudTabs>
</MudAppBar>

@code
{
    string searchTerm = "it";
    Model model { get; set; }

    protected override async Task OnInitializedAsync()
    {
        model = await _getModel;
    }
}